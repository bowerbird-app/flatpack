<div data-controller="flat-pack--toasts-region">
  <%= render FlatPack::PageTitle::Component.new(
    title: "Toast Component",
    subtitle: "Auto-dismissing notification messages with aria-live support."
  ) %>

  <!-- Toast Container -->
  <%= render "pages/component_method_variables_table", component: :toast %>
  <%= render FlatPack::Toasts::Region::Component.new(data: { "flat-pack--toasts-region-target": "container" }) %>

<!-- Basic Toasts -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Basic Toasts", anchor_link: true, subtitle: "Examples for Basic Toasts.") %>
  <p class="text-muted-foreground mb-4">
    Click the buttons below to trigger toast notifications.
  </p>
  <div class="flex flex-wrap gap-3 mb-4">
    <%= render FlatPack::Button::Component.new(
      text: "Info Toast",
      style: :secondary,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "info", message: "This is an informational message" }
    ) %>
    <%= render FlatPack::Button::Component.new(
      text: "Success Toast",
      style: :success,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "success", message: "Operation completed successfully!" }
    ) %>
    <%= render FlatPack::Button::Component.new(
      text: "Warning Toast",
      style: :warning,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "warning", message: "Please review your changes" }
    ) %>
    <%= render FlatPack::Button::Component.new(
      text: "Error Toast",
      style: :error,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "error", message: "An error occurred. Please try again." }
    ) %>
  </div>
  
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      <!-- Toast Container (place once in layout) -->
      &lt;%= render FlatPack::Toasts::Region::Component.new %&gt;
      
      <!-- Trigger via JavaScript -->
      document.dispatchEvent(new CustomEvent('toast:add', {
        detail: {
          type: 'success',
          message: 'Task completed!',
          timeout: 5000
        }
      }));
    CODE
  ) %>
</section>

<!-- Toast with Different Timeouts -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Custom Timeouts", anchor_link: true, subtitle: "Examples for Custom Timeouts.") %>
  <div class="flex flex-wrap gap-3 mb-4">
    <%= render FlatPack::Button::Component.new(
      text: "Quick (2s)",
      style: :secondary,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "info", message: "Quick toast (2 seconds)", timeout: 2000 }
    ) %>
    <%= render FlatPack::Button::Component.new(
      text: "Normal (5s)",
      style: :secondary,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "info", message: "Normal toast (5 seconds)", timeout: 5000 }
    ) %>
    <%= render FlatPack::Button::Component.new(
      text: "Long (10s)",
      style: :secondary,
      data: { action: "click->flat-pack--toasts-region#addToast", type: "info", message: "Long toast (10 seconds)", timeout: 10000 }
    ) %>
  </div>

  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      &lt;%= render FlatPack::Button::Component.new(
        text: "Quick (2s)",
        style: :secondary,
        data: {
          action: "click->flat-pack--toasts-region#addToast",
          type: "info",
          message: "Quick toast!",
          timeout: 2000
        }
      ) %&gt;
    CODE
  ) %>
</section>

<!-- Multiple Toasts -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Multiple Toasts", anchor_link: true, subtitle: "Examples for Multiple Toasts.") %>
  <p class="text-muted-foreground mb-4">
    Toasts stack automatically. Try clicking multiple times.
  </p>
  <%= render FlatPack::Button::Component.new(
    text: "Show 3 Toasts",
    style: :primary,
    id: "show-multiple-toasts"
  ) %>
  
  <script>
    document.getElementById('show-multiple-toasts')?.addEventListener('click', () => {
      setTimeout(() => {
        document.dispatchEvent(new CustomEvent('toast:add', {
          detail: { type: 'info', message: 'First toast notification' }
        }));
      }, 100);
      
      setTimeout(() => {
        document.dispatchEvent(new CustomEvent('toast:add', {
          detail: { type: 'success', message: 'Second toast notification' }
        }));
      }, 300);
      
      setTimeout(() => {
        document.dispatchEvent(new CustomEvent('toast:add', {
          detail: { type: 'warning', message: 'Third toast notification' }
        }));
      }, 500);
    });
  </script>

  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      document.dispatchEvent(new CustomEvent('toast:add', {
        detail: { type: 'info', message: 'First toast notification' }
      }));

      setTimeout(() => {
        document.dispatchEvent(new CustomEvent('toast:add', {
          detail: { type: 'success', message: 'Second toast notification' }
        }));
      }, 300);

      setTimeout(() => {
        document.dispatchEvent(new CustomEvent('toast:add', {
          detail: { type: 'warning', message: 'Third toast notification' }
        }));
      }, 500);
    CODE
  ) %>
</section>

<!-- Features -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Features", anchor_link: true, subtitle: "Examples for Features.") %>
  <ul class="list-disc list-inside space-y-2 text-foreground">
    <li><strong>Auto-Dismiss:</strong> Automatically disappear after a configurable timeout</li>
    <li><strong>Manual Dismiss:</strong> Click the close button to dismiss immediately</li>
    <li><strong>ARIA Live Regions:</strong> Screen readers announce new toasts</li>
    <li><strong>Stacking:</strong> Multiple toasts stack vertically</li>
    <li><strong>Animations:</strong> Smooth slide and fade animations</li>
    <li><strong>Reduced Motion:</strong> Respects prefers-reduced-motion</li>
    <li><strong>Turbo Stream Friendly:</strong> Can be triggered via Turbo Streams</li>
    <li><strong>Event-Driven:</strong> Trigger via custom JavaScript events</li>
  </ul>
</section>

<!-- Turbo Stream Example -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Turbo Stream Integration", anchor_link: true, subtitle: "Examples for Turbo Stream Integration.") %>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      <!-- In your controller action -->
      respond_to do |format|
        format.turbo_stream do
          render turbo_stream: turbo_stream.append(
            "toasts-region",
            partial: "flat_pack/toast/component",
            locals: { type: :success, message: "Saved!" }
          )
        end
      end
    CODE
  ) %>
</section>

</div>
