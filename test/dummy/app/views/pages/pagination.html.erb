<%= render FlatPack::PageTitle::Component.new(
  title: "Pagination Component",
  subtitle: "Page navigation using the Pagy gem with accessible controls."
) %>

<!-- Basic Pagination -->
<%= render "pages/component_method_variables_table", component: :pagination %>
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Basic Pagination", anchor_link: true, subtitle: "Examples for Basic Pagination.") %>
  <%= turbo_frame_tag "pagination_table" do %>
    <p class="text-[var(--color-muted-foreground)] mb-4">
      Showing <%= @records.size %> of <%= @pagy.count %> total items (Page <%= @pagy.page %> of <%= @pagy.pages %>)
    </p>

    <div class="border border-[var(--color-border)] rounded-lg overflow-hidden mb-4">
      <table class="w-full">
        <thead class="bg-[var(--color-muted)]">
          <tr>
            <th class="px-4 py-2 text-left text-sm font-semibold">#</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Name</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Email</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Status</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Category</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Views</th>
            <th class="px-4 py-2 text-left text-sm font-semibold">Published</th>
          </tr>
        </thead>
        <tbody>
          <% @records.each do |record| %>
            <tr class="border-t border-[var(--color-border)]">
              <td class="px-4 py-2 text-sm"><%= record.id %></td>
              <td class="px-4 py-2 text-sm"><%= record.name %></td>
              <td class="px-4 py-2 text-sm"><%= record.email %></td>
              <td class="px-4 py-2 text-sm"><%= record.status.to_s.capitalize %></td>
              <td class="px-4 py-2 text-sm"><%= record.category.to_s.titleize %></td>
              <td class="px-4 py-2 text-sm"><%= number_with_delimiter(record.views_count) %></td>
              <td class="px-4 py-2 text-sm"><%= record.published_at&.strftime("%b %d, %Y") %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <%= render FlatPack::Pagination::Component.new(pagy: @pagy) %>
  <% end %>
  
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE'),
      <!-- In your controller -->
      def index
        @pagy, @records = pagy(YourModel.all, items: 10)
      end
      
      <!-- In your view -->
      &lt;%= render FlatPack::Pagination::Component.new(pagy: @pagy) %&gt;
    CODE
    class: "mt-4"
  ) %>
</section>

<!-- Compact Pagination -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Compact Pagination", anchor_link: true, subtitle: "Examples for Compact Pagination.") %>
  <p class="text-[var(--color-muted-foreground)] mb-4">
    Use compact size for tighter layouts or mobile views.
  </p>
  <%= render FlatPack::Pagination::Component.new(pagy: @pagy, size: :compact) %>
  
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE'),
      &lt;%= render FlatPack::Pagination::Component.new(
        pagy: @pagy,
        size: :compact
      ) %&gt;
    CODE
    class: "mt-4"
  ) %>
</section>

<!-- Pagination in Card -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Pagination in Card", anchor_link: true, subtitle: "Examples for Pagination in Card.") %>
  <%= turbo_frame_tag "pagination_in_card" do %>
    <%= render FlatPack::Card::Component.new(style: :outlined) do |card| %>
      <% card.header do %>
        <h3 class="text-lg font-semibold">Recent Demo Records</h3>
      <% end %>
      <% card.body do %>
        <div class="space-y-2">
          <% @records.first(5).each do |record| %>
            <div class="flex items-center justify-between p-3 bg-[var(--color-muted)] rounded-lg">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-[var(--color-primary)] flex items-center justify-center text-white font-semibold">
                  <%= record.name.first(1).upcase %>
                </div>
                <div>
                  <span class="font-medium"><%= record.name %></span>
                  <p class="text-xs text-[var(--color-muted-foreground)]"><%= record.category.to_s.titleize %> - <%= number_with_delimiter(record.views_count) %> views</p>
                </div>
              </div>
              <%= render FlatPack::Button::Component.new(text: "View", style: :ghost, size: :sm) %>
            </div>
          <% end %>
        </div>
      <% end %>
      <% card.footer do %>
        <%= render FlatPack::Pagination::Component.new(pagy: @pagy, size: :compact) %>
      <% end %>
    <% end %>
  <% end %>
</section>

<!-- Setup Instructions -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Setup Instructions", anchor_link: true, subtitle: "Examples for Setup Instructions.") %>
  <h3 class="text-lg font-semibold mb-3">1. Install Pagy Gem</h3>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE'),
      # Add to Gemfile
      gem 'pagy', '~> 9.0'
      
      # Run bundle install
      bundle install
    CODE
    class: "mb-4"
  ) %>
  
  <h3 class="text-lg font-semibold mb-3">2. Include Pagy Backend</h3>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE'),
      # In app/controllers/application_controller.rb
      class ApplicationController < ActionController::Base
        include Pagy::Backend
      end
    CODE
    class: "mb-4"
  ) %>
  
  <h3 class="text-lg font-semibold mb-3">3. Use in Controllers</h3>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE'),
      def index
        @pagy, @users = pagy(User.all, items: 20)
      end
    CODE
    class: "mb-4"
  ) %>
  
  <h3 class="text-lg font-semibold mb-3">4. Render in Views</h3>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      &lt;%= render FlatPack::Pagination::Component.new(pagy: @pagy) %&gt;
    CODE
  ) %>
</section>

<!-- Features -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Features", anchor_link: true, subtitle: "Examples for Features.") %>
  <ul class="list-disc list-inside space-y-2 text-[var(--color-foreground)]">
    <li><strong>Pagy Integration:</strong> Uses the fast and lightweight Pagy gem</li>
    <li><strong>Accessible:</strong> Proper ARIA attributes and keyboard navigation</li>
    <li><strong>Turbo Friendly:</strong> Works seamlessly with Turbo Frames</li>
    <li><strong>Compact Mode:</strong> Optional compact size for tighter layouts</li>
    <li><strong>Smart Series:</strong> Intelligently shows relevant page numbers</li>
    <li><strong>Previous/Next:</strong> Always shows navigation arrows</li>
    <li><strong>Current Page:</strong> Visual indication of active page</li>
  </ul>
</section>

<!-- Pagy Configuration -->
<section class="mb-12">
  <%= render FlatPack::SectionTitle::Component.new(title: "Pagy Configuration", anchor_link: true, subtitle: "Examples for Pagy Configuration.") %>
  <%= render FlatPack::CodeBlock::Component.new(
    code: CGI.unescapeHTML(<<~'CODE')
      # config/initializers/pagy.rb
      require 'pagy/extras/overflow'
      Pagy::DEFAULT[:items] = 20
      Pagy::DEFAULT[:overflow] = :last_page
      
      # Optional extras
      # require 'pagy/extras/bootstrap'
      # require 'pagy/extras/array'
      # require 'pagy/extras/countless'
    CODE
  ) %>
</section>
